{% extends 'base.html' %}
{% load static %}
{% block title %}Mentor Peers{% endblock %}
{% block style_sheet_and_js %}
<link rel="stylesheet" href="{% static 'css/style.css' %}" />
<script src="{% static 'scripts/script.js' %}"></script>
{% endblock %}
{% block content %}
<h2>Register to mentor</h2>
<div class="container">
    <div class="form-group">
        <form id="session-form" enctype="multipart/form-data" class="row g-3">
            {% csrf_token %}
            {{ form.media }}
            <table>
                {{ form.as_table }}
            </table>
            <div class="form-group">
                <button id="form-button" type="submit" class="btn btn-primary">Submit</button>
                <a href="{% url 'home' %}" class="btn btn-secondary">Back</a>
            </div>
        </form>
    </div>
</div>
<script>
    $(document).ready(function () {
        $("#form-button").click(function () {
            $("#session-form").submit(function (e) {
                e.preventDefault();
                var formData = $(this).serialize();
                var api_endpoint = "api/mentor_sessions/";
                $.ajax({
                    url: api_endpoint,
                    type: "POST",
                    data: formData,
                    success: function (response) {
                        console.log;
                        alert("success");
                    },
                    error: function (error) {
                        console.log(formData)
                        alert("Failed something went wrong!");
                    },
                });
            });
        });
    });
</script>
{% endblock %}